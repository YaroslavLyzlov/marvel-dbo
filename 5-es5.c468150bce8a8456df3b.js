(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"+RkK":function(n,t,e){"use strict";e.r(t);var l=e("CcnG"),i=function(){return function(){}}(),r=e("pMnS"),o=e("Ip0R"),u=function(){function n(){this.realSize=48,this.innerSize=32}return Object.defineProperty(n.prototype,"size",{set:function(n){this.realSize=n,this.innerSize=n/1.5},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"style",{get:function(){var n=this.realSize+"px";return{height:n,width:n}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"styleInner",{get:function(){var n=this.innerSize+"px";return{height:n,width:n}},enumerable:!0,configurable:!0}),n}(),a=l.mb({encapsulation:0,styles:[["[_nghost-%COMP%]{font-size:0}.lds-dual-ring[_ngcontent-%COMP%]{width:48px;height:48px;display:flex;justify-content:center;align-items:center}.lds-dual-ring-inner[_ngcontent-%COMP%]{display:block;width:32px;height:32px;margin:1px;border-radius:50%;border:3px solid #000;border-color:#000 transparent;-webkit-animation:1.2s linear infinite lds-dual-ring;animation:1.2s linear infinite lds-dual-ring}@-webkit-keyframes lds-dual-ring{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes lds-dual-ring{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}"]],data:{}});function s(n){return l.Bb(0,[(n()(),l.ob(0,0,null,null,5,"div",[["class","lds-dual-ring"]],null,null,null,null,null)),l.yb(512,null,o.t,o.u,[l.k,l.t,l.D]),l.nb(2,278528,null,0,o.m,[o.t],{ngStyle:[0,"ngStyle"]},null),(n()(),l.ob(3,0,null,null,2,"div",[["class","lds-dual-ring-inner"]],null,null,null,null,null)),l.yb(512,null,o.t,o.u,[l.k,l.t,l.D]),l.nb(5,278528,null,0,o.m,[o.t],{ngStyle:[0,"ngStyle"]},null)],function(n,t){var e=t.component;n(t,2,0,e.style),n(t,5,0,e.styleInner)},null)}var c=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),h=l.mb({encapsulation:0,styles:[["[_nghost-%COMP%]{background-color:rgba(0,0,0,.3);position:fixed;width:100vw;height:100vh;left:0;top:0;right:0;bottom:0;z-index:30;display:flex;justify-content:center;align-items:center}"]],data:{}});function g(n){return l.Bb(0,[(n()(),l.ob(0,0,null,null,1,"app-loader",[],null,null,null,s,a)),l.nb(1,49152,null,0,u,[],null,null)],null,null)}var m=e("K9Ia"),d=function(){function n(n,t,e){var l=this;this.marvelStateService=n,this.route=t,this.router=e,this.isLoading=!1,this.currentPage={url:"",anchors:[],width:0,height:0},this.isReady=!1,this.onReadeHtmlImage=new m.a,this.isHighlightAnchors=!1,this.onResize=function(){console.log("load");var n=l.htmlImageElement.nativeElement.width,t=l.htmlImageElement.nativeElement.height;l.currentPage.anchors.map(function(e){return e.left=e.defaultLeft*n/l.currentPage.width,e.top=e.defaultTop*t/l.currentPage.height,e.width=e.defaultWidth*n/l.currentPage.width,e.height=e.defaultHeight*t/l.currentPage.height,e})},t.params.subscribe(function(n){l.onChangeRoute(n.id)}),window.addEventListener("resize",this.onResize)}return n.prototype.onChangeRoute=function(n){var t=this;this.isReady?this.currentPage=this.marvelStateService.getPage(n):this.onReadeHtmlImage.subscribe(function(){console.log("2222"),t.currentPage=t.marvelStateService.getPage(n)})},n.prototype.highlightAnchors=function(){var n=this;this.isHighlightAnchors=!0,setTimeout(function(){n.isHighlightAnchors=!1},300)},n.prototype.transitionToPage=function(n,t){var e=this;console.log("anchor",t),n.stopPropagation(),t.action?(this.isLoading=!0,this.sub=t.action().subscribe(function(n){"confirmed"===n.answer.transaction_info.status&&(e.isLoading=!1,e.router.navigateByUrl(t.route),e.sub&&e.sub.unsubscribe()),console.log("result",n,t)})):this.router.navigateByUrl(t.route)},n.prototype.ngAfterViewInit=function(){console.log("hello"),this.onReadeHtmlImage.next(),this.isReady=!0,this.htmlImageElement.nativeElement.addEventListener("load",this.onResize)},n}(),p=e("xfVI"),b=e("ZYCi"),f=l.mb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:flex;justify-content:center}.marvel-item__image[_ngcontent-%COMP%]{max-width:100vw}.marvel-item__anchor[_ngcontent-%COMP%]{position:absolute;opacity:0;transition:all .2s cubic-bezier(.645,.045,.355,1)}.marvel-item__anchor--show[_ngcontent-%COMP%]{opacity:1;box-shadow:inset 0 0 0 2px #007ec1,0 2px 4px 0 rgba(0,0,0,.1);background-color:rgba(154,220,255,.6)}.marvel-item__wrapper[_ngcontent-%COMP%]{position:relative}"]],data:{}});function v(n){return l.Bb(0,[(n()(),l.ob(0,0,null,null,3,"div",[["class","marvel-item__anchor"]],[[2,"marvel-item__anchor--show",null]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.transitionToPage(e,n.context.$implicit)&&l),l},null,null)),l.yb(512,null,o.t,o.u,[l.k,l.t,l.D]),l.nb(2,278528,null,0,o.m,[o.t],{ngStyle:[0,"ngStyle"]},null),l.xb(3,{top:0,left:1,width:2,height:3})],function(n,t){var e=n(t,3,0,t.context.$implicit.top+"px",t.context.$implicit.left+"px",t.context.$implicit.width+"px",t.context.$implicit.height+"px");n(t,2,0,e)},function(n,t){n(t,0,0,t.component.isHighlightAnchors)})}function y(n){return l.Bb(0,[(n()(),l.ob(0,0,null,null,1,"app-marvel-item-loader",[],null,null,null,g,h)),l.nb(1,114688,null,0,c,[],null,null)],function(n,t){n(t,1,0)},null)}function w(n){return l.Bb(0,[l.zb(402653184,1,{htmlImageElement:0}),(n()(),l.ob(1,0,null,null,5,"div",[["class","marvel-item__wrapper"]],null,null,null,null,null)),(n()(),l.ob(2,0,[[1,0],["htmlImageElement",1]],null,0,"img",[["class","marvel-item__image"]],[[8,"src",4]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.highlightAnchors()&&l),l},null,null)),(n()(),l.db(16777216,null,null,1,null,v)),l.nb(4,278528,null,0,o.i,[l.O,l.L,l.s],{ngForOf:[0,"ngForOf"]},null),(n()(),l.db(16777216,null,null,1,null,y)),l.nb(6,16384,null,0,o.j,[l.O,l.L],{ngIf:[0,"ngIf"]},null)],function(n,t){var e=t.component;n(t,4,0,e.currentPage.anchors),n(t,6,0,e.isLoading)},function(n,t){n(t,2,0,t.component.currentPage.url)})}function x(n){return l.Bb(0,[(n()(),l.ob(0,0,null,null,1,"app-marvel-item",[],null,null,null,w,f)),l.nb(1,4243456,null,0,d,[p.a,b.a,b.k],null,null)],null,null)}var P=l.kb("app-marvel-item",d,x,{},{},[]),_=function(){return function(){}}();e.d(t,"MarvelPageModuleNgFactory",function(){return k});var k=l.lb(i,[],function(n){return l.ub([l.vb(512,l.j,l.Y,[[8,[r.a,P]],[3,l.j],l.x]),l.vb(4608,o.l,o.k,[l.u,[2,o.w]]),l.vb(1073742336,o.b,o.b,[]),l.vb(1073742336,b.l,b.l,[[2,b.q],[2,b.k]]),l.vb(1073742336,_,_,[]),l.vb(1073742336,i,i,[]),l.vb(1024,b.i,function(){return[[{path:"",redirectTo:"login",pathMatch:"full"},{path:":id",component:d}]]},[])])})}}]);